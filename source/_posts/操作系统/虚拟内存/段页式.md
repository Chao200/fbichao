---
title: 段页式
tags:
  - 分段
  - 分页
author: fbichao
categories: 
  - 操作系统
  - 虚拟内存
excerpt: 段页式管理 
math: true
date: 2024-03-30 19:45:00
---


# 段页式管理

## 1. 分段

程序它是由若干个逻辑分段组成的，比如：代码段、数据段、堆段、栈段，
不同的段具有不同属性，所以使用分段就是把程序的不同的逻辑段分离出来，每个段都有其自己的大小和权限

![](https://file.fbichao.top/2024/03/05f2188d6ea98d5652b1b3a87e01f90d.png)

- 很方便按照逻辑模块实现信息的共享和保护
- 如果段长过大，为其分配很大的连续空间会很不方便
- 需要一次装入内存
- 外部碎片
- 内存交换效率低下
- 分段对用户可见
- 分段的地址空间是二维的

## 2. 分页

内存分页是把整个虚拟和物理内存空间分成固定大小连续的页，比如 Linux 是 4KB

![](https://file.fbichao.top/2024/03/1a28275da82fa7fd9d97fddce96fab1f.png)

- 内存空间利用率高，不会产生外部碎片
- 只会有少量的页内碎片
- 如果内存空间不够，会根据一些策略换入换出，只交换部分页，提高了交换效率
- 不需要一次装入内存
- 存储页表占用空间，需要多级页表解决
- 分页对用户不可见
- 分页的地址空间是一维的


## 3. 多级页表

![](https://file.fbichao.top/2024/03/b1c9ab095015145af4e420d401f5e10e.png)

局部性原理


## 4. TLB

![](https://file.fbichao.top/2024/03/03ba332d9b908c274895771227fc11ce.png)


局部性原理



# 总结

分段是按照程序逻辑划分，分页是划分固定大小的页

分段会有外部碎片，分页会有内部碎片

分段产生外部碎片，可以通过交换解决，但是会存在效率问题

分段需要一次性装入内存，分页不需要

分段对用户可见，分页对用户不可见

分段地址空间是二维的，分页是一维的


